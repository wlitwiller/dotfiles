# Smart pane switching with awareness of Vim/Neovim splits
is_vim="ps -o state= -o comm= -t '#{pane_tty}' | grep -iqE '^[^TXZ ]+ +(\S+/)?g?(n?vim|view)$'"

bind-key -n C-h if-shell "$is_vim" "send-keys C-h" "select-pane -L"
bind-key -n C-j if-shell "$is_vim" "send-keys C-j" "select-pane -D"
bind-key -n C-k if-shell "$is_vim" "send-keys C-k" "select-pane -U"
bind-key -n C-l if-shell "$is_vim" "send-keys C-l" "select-pane -R"

##### Basics #####
set -g mouse on
set -g mode-keys vi
set -g history-limit 50000
set -g default-terminal "screen-256color"
set -as terminal-features ",xterm-256color:RGB"
set -g status-interval 2

# Vim-style selections in copy mode
bind-key -T copy-mode-vi v send -X begin-selection        # char-wise
bind-key -T copy-mode-vi V send -X select-line             # line-wise
bind-key -T copy-mode-vi C-v send -X rectangle-toggle      # block-wise

# Yank like Vim
bind-key -T copy-mode-vi y send -X copy-selection-and-cancel

# Make sure escape timing feels good in nvim
set -sg escape-time 0

##### Catppuccin (TPM) #####
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'catppuccin/tmux'

# Pick a flavor: latte|frappe|macchiato|mocha
set -g @catppuccin_flavour 'mocha'

# Optional: cleaner status
set -g status-position bottom
set -g status-left-length 60
set -g status-right ""

# (Optional) window style tweaks
set -g @catppuccin_window_status_style "rounded"

##### Your existing vim-tmux-navigator bindings can stay above/below #####

##### TPM init (keep this LAST) #####
run '~/.tmux/plugins/tpm/tpm'

